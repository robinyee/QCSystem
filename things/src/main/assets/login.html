<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.0.1">
	<link rel="icon" href="favicon.ico">
    <title>水质质控仪</title>
<!--	
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
	<link type="text/css" rel="stylesheet" href="https://unpkg.zhimg.com/bootstrap/dist/css/bootstrap.min.css" />
	<link type="text/css" rel="stylesheet" href="https://unpkg.zhimg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />
	<script src="https://unpkg.zhimg.com/vue@latest/dist/vue.min.js"></script>
	<script src="https://unpkg.zhimg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
	<script src="https://unpkg.zhimg.com/bootstrap-vue@latest/dist/bootstrap-vue-icons.min.js"></script>
-->	
	
	<link type="text/css" rel="stylesheet" href="bootstrap.min.css" />
	<link type="text/css" rel="stylesheet" href="bootstrap-vue.min.css" />
	<script src="vue.min.js"></script>
	<script src="bootstrap-vue.min.js"></script>
	<script src="bootstrap-vue-icons.min.js"></script>
	
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link href="signin.css" rel="stylesheet">
  </head>
  
  <body class="text-center">
  
    <form class="form-signin">
	<div id="root">
  <img class="mb-4" src="bootstrap-solid.png" alt="" width="72" height="72">
  <h1 class="h3 mb-3 font-weight-normal">质控仪用户登录</h1>
  <label for="inputUser" class="sr-only">用户名</label>
  <input type="text" id="inputUser" class="form-control" placeholder="用户名" required autofocus v-model="username" @keyup.enter="sendData('LOGIN|' + username + '|' + password)">
  <label for="inputPassword" class="sr-only">密码</label>
  <input type="password" id="inputPassword" class="form-control" placeholder="密码" required v-model="password" @keyup.enter="sendData('LOGIN|' + username + '|' + password)">
  <div class="checkbox mb-3">
    <label>
      <input type="checkbox" value="remember-me"> 记住密码 
    </label>
  </div>
  <button class="btn btn-lg btn-primary btn-block" type="button" @keyup.enter="sendData('LOGIN|' + username + '|' + password)" @click="sendData('LOGIN|' + username + '|' + password)">登录</button>
  <p class="mt-5 mb-3 text-muted">&copy; 2017-2020 江苏南水科技有限公司</p>

</div>
</form>

</body>
<!--加载库文件-->
<script src="jquery.slim.min.js"></script>
<script src="popper.min.js"></script>
<script src="bootstrap.min.js"></script>
<script src="feather.min.js"></script>	
<!--加载库文件-->
<script src="socketqc.js"></script>

<script type="text/javascript">
    //alert(Vm.address);
	//页面打开自动连接服务器
	setInterval(function(){
		if(!Vm.connected){
			Vm.autoWsConnect();
			console.log('连接服务器' + Vm.connected);
		}
		/*
		if(Vm.respond === 'LOGIN_No') {
			 alert("用户名或密码错误，请重新输入");
			 Vm.respond = '';
		} 
		*/
		if(Vm.respond === 'LOGIN_Ok') {
			window.location.href='index.html?id=' + Vm.token; 
		}
	}, 500);
	//自动发送心跳包
	setTimeout(function(){
		if(Vm.connected){
			if(!Vm.autoSend){
				Vm.heartBeatContent = "RUN_Heart";
				Vm.autoHeartBeat();
				console.log('自动发送心跳包' + Vm.autoSend);
			}
		}
	}, 800);

</script>

</html>
